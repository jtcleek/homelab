services:
  headscale:
    image: docker.io/headscale/headscale:v0.28.0@sha256:51b1b9182bb6219e97374fa89af6b9320d6f87ecc739e328d5357ea4fa7a5ce3
    container_name: headscale
    restart: unless-stopped
    labels:
      me.tale.headplane.target: headscale
    ports:
      - '127.0.0.1:8080:8080'
      - '127.0.0.1:9090:9090'
    volumes:
      - '/opt/headscale/config.yaml:/etc/headscale/config.yaml'
      - '/opt/headscale/lib:/var/lib/headscale'
      - '/opt/headscale/run:/var/run/headscale'
    command: serve
  headplane:
    image: ghcr.io/tale/headplane:0.6.1@sha256:74bec8f23ce57f235574b7b3e809a0d9ca500947da45dac485b5132fa4cc9fab
    container_name: headplane
    restart: unless-stopped
    ports:
      - '127.0.0.1:3000:3000'
    volumes:
      - '/opt/headplane/config.yaml:/etc/headplane/config.yaml'
      - '/opt/headscale/config.yaml:/etc/headscale/config.yaml'
      - '/opt/headplane/lib:/var/lib/headplane'
      - '/var/run/docker.sock:/var/run/docker.sock:ro'
